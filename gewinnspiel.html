<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400&display=swap" rel="stylesheet">
    <title>Gewinnspiel@CHH</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400&display=swap" rel="stylesheet">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: 'Fredoka', sans-serif; /* Webfont verwendet */
            background-color: #1f2126;
            color: #ece6ee;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 10px;
        }

        .row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .text-field {
            width: auto;
            padding: 10px;
            background-color: #ece6ee;
            border-radius: 8px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            text-align: justify;
            font-size: 12px;
            color: #000;
            font-family: 'Fredoka', sans-serif; /* Schriftart Fredoka */
        }

        .applet-container {
            align-items: center;
            border:5px;
        }

        .corner-image {
            position: fixed;
            width: 400px;
            height: auto;
            z-index: 1000;
            pointer-events: none; /* Klicks durchlassen */
        }

        .corner-image.bottom-left {
            bottom: 0;
            left: 0;
        }

        .corner-image.bottom-right {
            bottom: 0;
            right: 0;
        }

        .corner-image.top-left {
            top: 0;
            left: 0;
        }

        .corner-image.top-right {
            top: 0;
            right: 0;
        }
        /* Header Image */
        .header-image {
            width: 100%;
            height: auto;
            display: block;
        }
    </style>
    <script src="https://cdn.geogebra.org/apps/deployggb.js"></script>
</head>
<body>
    <!-- Corner Images -->
    <img src="Oben-LinksX.png" alt="Corner Image 1" class="corner-image top-left">
    <img src="Oben-RechtsX.png" alt="Corner Image 2" class="corner-image top-right">
    <img src="unten-linksX.png" alt="Corner Image 3" class="corner-image bottom-left">
    <img src="unten-rechtsX.png" alt="Corner Image 4" class="corner-image bottom-right">

    <img src="gewinnspiel-schriftzug.png" alt="Header Image" class="header-image"> 
    
    <div class="container">
        <!-- Zeile 1 -->
        <div class="row">
            <div class="text-field">
                <p>Linker Textbereich: Lorem ipsum dolor sit amet, <br>consectetur adipiscing elit.</p>
            </div>
            <div class="applet-container" id="applet1-container"></div>
                                  <div class="text-field" id="highscore-field">
                <p>Highscore-Tabelle:</p>
                <table class="highscore-table" id="highscore-table">
                    <thead>
                        <tr>
                            <th>Platz</th>
                            <th>Name</th>
                            <th>Punkte</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamische Inhalte -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // GeoGebra Applets konfigurieren
        const applets = [
            {
                id: "applet1",
                material_id: "cxxbwem3", // Türme von Hanoi
                width: 901,
                height: 665,
                container: "applet1-container"
            }
        ];

        // GeoGebra Applet laden
        applets.forEach(applet => {
            const parameters = {
                id: applet.id,
                material_id: applet.material_id,
                width: applet.width,
                height: applet.height,
                showToolBar: false,
                showMenuBar: false,
                showAlgebraInput: false
            };
            const ggbApplet = new GGBApplet(parameters, true);
            ggbApplet.inject(applet.container);
        });

        // Highscore-Tabelle abrufen und aktualisieren
async function fetchHighscores() {
    // URL mit richtigem JSON-Endpoint
    const sheetUrl = "https://sheets.googleapis.com/v4/spreadsheets/1I0RCi_AjGgKTBSDBA9F1gA_yvcIauroPOD8pQVc_MmM/values/Formularantworten?key=AIzaSyBjdsk4rzMbGYn2tUKsKookhkAIovriZkI";

    try {
        const response = await fetch(sheetUrl);
        const data = await response.json();

        // Daten extrahieren
        const rows = data.feed.entry.map(entry => ({
            name: entry.gsx$name.$t,
            points: entry.gsx$points.$t,
        }));

        // Tabelle befüllen
        const tableBody = document.getElementById("highscore-table").querySelector("tbody");
        tableBody.innerHTML = "";
        rows.forEach((row, index) => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${index + 1}</td>
                <td>${row.name}</td>
                <td>${row.points}</td>
            `;
            tableBody.appendChild(tr);
        });
    } catch (error) {
        console.error("Fehler beim Abrufen der Highscores:", error);
    }
}


        // Highscores laden
        fetchHighscores();
    </script>
</body>
</html>
